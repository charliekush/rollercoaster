function rollercoasterSlider(a){var b={hammerListeners:"swipeleft swiperight dragleft dragright dragend release dragup dragdown swipeup swipedown",minimap:!0,lazyload:!0};a=$(a),a=a.children(".section_wrapper");var c=this,d=1,e=600,f=$(a).children("section").length;this.mergeOptions=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},this.init=function(d){d=void 0!=d?c.mergeOptions(b,d):b,a.parent("div").addClass("initialized");var e=0;a.children("section").each(function(){var b=0;e++,1==e&&($(this).addClass("active"),$(this).children(".pane").length>1&&a.parent("div").children(".navigation_item.right").addClass("active")),$(this).attr("data-minimap-id",e),$(this).hammer({show_touches:!1,drag_lock_to_axis:!0}).on(d.hammerListeners,function(a){c.handleHammer(a)}),$(this).children(".pane").each(function(){b++,$(this).attr("data-minimap-id",b),1==b&&$(this).addClass("active"),0==d.lazyload?$(this).css("background-image","url("+$(this).attr("data-background")+")"):(a.children("section:first-child").each(function(){var a=$(this).attr("data-minimap-id");$(this).children(".pane").each(function(){c.lazyload(a,$(this).attr("data-minimap-id"))})}),a.children("section:nth-child(2)").each(function(){var a=$(this).attr("data-minimap-id");$(this).children(".pane:first-child").each(function(){c.lazyload(a,$(this).attr("data-minimap-id"))})}))})}),e>1&&a.parent("div").children(".navigation_item.down").addClass("active"),a.parent("div").children(".navigation_item.down").bind("click",function(){c.goDown()}).html(""),a.parent("div").children(".navigation_item.up").bind("click",function(){c.goUp()}).html(""),a.parent("div").children(".navigation_item.left").bind("click",function(){c.leftPane()}).html(""),a.parent("div").children(".navigation_item.right").bind("click",function(){c.rightPane()}).html(""),$(window).bind("resize",function(){c.handleResize()}),c.handleResize(),1==d.minimap&&c.minimapGenerator()},this.lazyload=function(b,c){a.children("section[data-minimap-id='"+b+"']").children(".pane[data-minimap-id='"+c+"']").css("background-image","url("+a.children("section[data-minimap-id='"+b+"']").children(".pane[data-minimap-id='"+c+"']").attr("data-background")+")")},this.handleResize=function(){var b=a.parent("div").width(),c=a.parent("div").height();a.css("height",c*a.children("section").length),a.children("section").css("height",c),a.children("section").children(".pane").css("height",c).css("width",b);var d=0;a.children("section").each(function(){var a=$(this).children(".pane").length;e=$(this).children(".pane:first-child").width(),$(this).css("width",a*e+"px"),$(this).css("margin-top",c*d),d++})},this.handleHammer=function(a){switch(a.gesture.preventDefault(),a.type){case"swipeleft":c.rightPane(),a.gesture.stopDetect();break;case"swiperight":c.leftPane(),a.gesture.stopDetect();break;case"dragright":case"dragleft":c.dragLeftRight(a);break;case"release":c.releasePane(a),a.gesture.stopDetect();break;case"swipedown":c.goUp(),a.gesture.stopDetect();break;case"swipeup":c.goDown(),a.gesture.stopDetect();break;case"dragup":case"dragdown":c.dragUpDown(a)}},this.setContainerOffset=function(a,b,c,d){a.removeClass("animate"),d&&a.addClass("animate"),Modernizr.csstransforms3d?a.css("transform","translate3d("+b+"%,"+c+"%,0) scale3d(1,1,1)"):Modernizr.csstransforms&&a.css("transform","translate("+b+"%,"+c+"+)")},this.rightPane=function(b){void 0==b&&(b=1),$("section[data-minimap-id='"+d+"']").attr("id");var e=a.children("section.active").children(".pane").length,f=parseInt(a.children("section.active").children(".pane.active").attr("data-minimap-id")),g=parseInt(a.children("section.active").attr("data-minimap-id")),h=0;e>=f+b?(h=-(100/e*(f-1+b)),f+=b,a.children("section.active").children(".pane.active").removeClass("active"),a.children("section.active").children(".pane[data-minimap-id='"+f+"']").addClass("active")):h=-(100/e*(f-1)),e>f&&e>1?a.parent("div").children(".navigation_item.right").addClass("active"):a.parent("div").children(".navigation_item.right").removeClass("active"),f>1?a.parent("div").children(".navigation_item.left").addClass("active"):a.parent("div").children(".navigation_item.left").removeClass("active"),c.setContainerOffset(a.children("section.active"),h,0,!0),c.minimapNavigate(f,g,!0)},this.leftPane=function(b){void 0==b&&(b=1),$("section[data-minimap-id='"+d+"']").attr("id");var e=a.children("section.active").children(".pane").length,f=parseInt(a.children("section.active").children(".pane.active").attr("data-minimap-id")),g=0,h=parseInt(a.children("section.active").attr("data-minimap-id"));f-b>0?(g=-(100/e*(f-b-1)),f-=b,a.children("section.active").children(".pane.active").removeClass("active"),a.children("section.active").children(".pane[data-minimap-id='"+f+"']").addClass("active")):g=0,e>f&&e>1?a.parent("div").children(".navigation_item.right").addClass("active"):a.parent("div").children(".navigation_item.right").removeClass("active"),f>1?a.parent("div").children(".navigation_item.left").addClass("active"):a.parent("div").children(".navigation_item.left").removeClass("active"),c.minimapNavigate(f,h,!0),c.setContainerOffset(a.children("section.active"),g,0,!0)},this.goDown=function(b){void 0==b&&(b=1);var d=a,e=parseInt(a.children("section.active").attr("data-minimap-id"));f>=e+1&&(a.children("section.active").removeClass("active"),e+=b,a.children("section[data-minimap-id='"+e+"']").addClass("active")),a.children("section[data-minimap-id='"+e+"']").each(function(){var a=$(this).attr("data-minimap-id");$(this).children(".pane").each(function(){c.lazyload(a,$(this).attr("data-minimap-id"))})}),a.children("section[data-minimap-id='"+(e+1)+"']").each(function(){var a=$(this).attr("data-minimap-id");$(this).children(".pane:first-child").each(function(){c.lazyload(a,$(this).attr("data-minimap-id"))})}),e>1&&a.parent("div").children(".navigation_item.up").addClass("active"),f>e?a.parent("div").children(".navigation_item.down").addClass("active"):a.parent("div").children(".navigation_item.down").removeClass("active"),c.setContainerOffset(d,0,-100/f*(e-1),!0);var g=a.children("section.active").children(".pane.active").attr("data-minimap-id"),h=a.children("section.active").children(".pane").length;h>g&&h>1?a.parent("div").children(".navigation_item.right").addClass("active"):a.parent("div").children(".navigation_item.right").removeClass("active"),g>1?a.parent("div").children(".navigation_item.left").addClass("active"):a.parent("div").children(".navigation_item.left").removeClass("active"),c.minimapNavigate(g,e,!0)},this.goUp=function(b){void 0==b&&(b=1);var d=a,e=parseInt(a.children("section.active").attr("data-minimap-id"));e-b>=1&&(a.children("section.active").removeClass("active"),e-=b,a.children("section[data-minimap-id='"+e+"']").addClass("active")),e>1?a.parent("div").children(".navigation_item.up").addClass("active"):a.parent("div").children(".navigation_item.up").removeClass("active"),f>e?a.parent("div").children(".navigation_item.down").addClass("active"):a.parent("div").children(".navigation_item.down").removeClass("active"),c.setContainerOffset(d,0,-100/f*(e-1),!0);var g=a.children("section.active").children(".pane.active").attr("data-minimap-id"),h=a.children("section.active").children(".pane").length;h>g&&h>1?a.parent("div").children(".navigation_item.right").addClass("active"):a.parent("div").children(".navigation_item.right").removeClass("active"),g>1?a.parent("div").children(".navigation_item.left").addClass("active"):a.parent("div").children(".navigation_item.left").removeClass("active"),c.minimapNavigate(g,e,!0)},this.dragLeftRight=function(b){var d=a.children("section.active").attr("data-minimap-id"),f=a.children("section.active").children(".pane").length,g=parseInt(a.children("section.active").children(".pane.active").attr("data-minimap-id"))-1,h=-(100/f)*g,i=100/e*b.gesture.deltaX/f;(0==g&&b.gesture.direction==Hammer.DIRECTION_RIGHT||g==f-1&&b.gesture.direction==Hammer.DIRECTION_LEFT)&&(i*=.4),c.setContainerOffset($("section[data-minimap-id="+d+"]"),i+h,0,!1)},this.dragUpDown=function(b){var d=a.children("section.active").attr("data-minimap-id"),e=-(100/f)*(d-1),g=100/$(window).height()*b.gesture.deltaY/f;c.setContainerOffset(a,0,g+e,!1)},this.releasePane=function(b){a.children("section.active").attr("id");var d=a.children("section.active").children(".pane").length,g=parseInt(a.children("section.active").children(".pane.active").attr("data-minimap-id")),h=a.children("section.active").attr("data-minimap-id");if(b.gesture.direction==Hammer.DIRECTION_LEFT||b.gesture.direction==Hammer.DIRECTION_RIGHT)if(Math.abs(b.gesture.deltaX)>e/2)"right"==b.gesture.direction?c.leftPane():c.rightPane();else{if(1==g)var i=0;else var i=-(100/d)*(g-1);c.setContainerOffset(a.children("section.active"),i,0,!0),a.children("section.active").children(".pane.active").removeClass("active"),a.children("section.active").children(".pane[data-minimap-id='"+g+"']").addClass("active")}else if(Math.abs(b.gesture.deltaY)>$(window).height()/4)"up"==b.gesture.direction?c.goDown():c.goUp();else{var i=-(100/f)*(h-1);c.setContainerOffset(a,0,i,!0)}},this.minimapGenerator=function(){var b="";a.parent("div").append("<div class='minimap'></div>"),a.children("section").each(function(){var a=$(this).attr("data-minimap-id");b+="<div class='vertical_section' data-minimap-id='"+a+"'>",$(this).children(".pane").each(function(){b+="<div class='tile' data-section-id='"+a+"' data-minimap-id='"+$(this).attr("data-minimap-id")+"'>"+$(this).attr("data-minimap-id")+"</div>"}),b+="<div class='section_title'>"+$(this).attr("data-section-title")+"</div></div>"}),a.parent("div").children(".minimap").append(b),a.parent("div").children(".minimap").children(".vertical_section:first-child").children(".tile:first-child").addClass("active"),a.parent("div").children(".minimap").children("div.vertical_section").children(".tile").bind("click",function(){$(this).parent().parent().children(".vertical_section").children(".tile").removeClass("active"),$(this).addClass("active"),c.minimapNavigate($(this).attr("data-minimap-id"),$(this).attr("data-section-id"),!1)})},this.minimapNavigate=function(b,d,e){var f=a.children("section.active").attr("data-minimap-id"),g=0,h=0;a.parent("div").children(".minimap").children(".vertical_section").children(".tile").removeClass("active"),a.parent("div").children(".minimap").children(".vertical_section[data-minimap-id='"+d+"']").children(".tile[data-minimap-id='"+b+"']").addClass("active"),f>d?(g=f-d,e||c.goUp(g)):(g=d-f,e||c.goDown(g));var i=a.children("section[data-minimap-id='"+d+"']").children(".pane.active").attr("data-minimap-id");i>b?(h=i-b,e||c.leftPane(h)):(h=b-i,e||c.rightPane(h))}}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();